---
metaTitle: Переменные окружения в Docker
metaDescription: Узнайте, как использовать переменные окружения в Docker для настройки контейнеров- упростите управление конфигурациями с помощью примеров и практических советов
author: Олег Марков
title: Переменные окружения в Docker
preview: В этой статье мы подробно рассмотрим, как эффективно управлять и использовать переменные окружения в Docker для настройки контейнеров и обеспечения гибкости конфигураций.
---

## Введение

Сегодня мы поговорим на важную тему в мире Docker — переменные окружения. Если вы интересуетесь контейнеризацией приложений и хотите понять, как эффективно управлять конфигурациями ваших контейнеров, то вы попали по адресу. Переменные окружения позволяют вам настроить поведение приложения внутри контейнера без изменения его кода. Это значит, что вы можете легко менять параметры вашего приложения, такие как порты, адреса базы данных и многое другое, прямо во время развертывания. Давайте разберемся, как это работает.

## Как работают переменные окружения в Docker

Переменные окружения — это пары "ключ-значение", которые Docker передает во время создания и запуска контейнера. Эти переменные помогают вашему приложению получить нужные параметры для своей работы. Они определяются на этапе создания образа контейнера и могут быть изменены при его запуске.

Переменные окружения - важный инструмент для настройки контейнеров. Однако для управления сложными конфигурациями необходимо использовать Docker Compose и другие инструменты для автоматизации. Если вы хотите детальнее погрузиться в Docker — приходите на наш большой курс [Docker + Ansible - с нуля](https://purpleschool.ru/course/docker). На курсе 159 уроков и 7 упражнений, AI-тренажеры для безлимитной практики с кодом и задачами 24/7, решение задач с живым ревью наставника, еженедельные встречи с менторами.

### Определение переменных окружения в Dockerfile

Чтобы задать переменные окружения на этапе создания образа, вы можете указать их в Dockerfile с помощью инструкции `ENV`. Давайте посмотрим, как это делается:

```dockerfile
# Здесь мы используем базовый образ Python
FROM python:3.8

# Устанавливаем переменную окружения, которая указывает на каталог проекта
ENV PROJECT_DIR=/usr/src/app

# Устанавливаем переменную окружения для режима работы, например, 'development'
ENV APP_MODE=development

# Используем переменную окружения для задания рабочей директории
WORKDIR $PROJECT_DIR

# Копируем все файлы в рабочую директорию
COPY . $PROJECT_DIR

# Запускаем приложение
CMD ["python", "app.py"]
```

Как видите, мы задали две переменные окружения: `PROJECT_DIR` и `APP_MODE`. `PROJECT_DIR` используется, чтобы указать рабочую директорию, а `APP_MODE` указывает режим работы приложения.

### Переопределение переменных окружения при запуске контейнера

Вы можете изменять значения переменных окружения при запуске контейнера, используя флаг `-e` с `docker run`. Посмотрим, как это сделать:

```bash
# Запускаем контейнер и переопределяем значение APP_MODE
docker run -e APP_MODE=production my-python-app
```

В этом примере мы задаем `APP_MODE` значение `production`, тем самым переключая приложение в режим производственной среды.

### Чтение переменных окружения в приложении

Как правило, приложения получают значение переменных окружения с помощью стандартных библиотек различных языков программирования. Например, в Python это можно сделать с помощью модуля `os`.

```python
import os

# Читаем переменную окружения APP_MODE
app_mode = os.getenv('APP_MODE')

# Используем значение переменной среды
print(f"Приложение запущено в режиме: {app_mode}")
```

В этом примере мы загружаем переменную среды `APP_MODE` и выводим ее значение на консоль, что позволяет нам подтвердить, что приложение работает в верной конфигурации.

### Использование файлов .env

Если у вас много переменных окружения, вы можете использовать файл `.env` для их хранения. Такой подход делает конфигурацию более читаемой и удобной. Вы можете подключить Docker к файлу `.env`, используя ключ `--env-file`.

```bash
# Запускаем контейнер с подключением файла .env
docker run --env-file .env my-python-app
```

Файл `.env` может выглядеть так:

```
APP_MODE=production
PROJECT_DIR=/usr/src/app
```

Теперь Docker автоматически подгрузит эти переменные из файла, упрощая управление конфигурациями.

## Заключение

Итак, сегодня мы узнали, как переменные окружения в Docker могут значительно упростить управление конфигурациями контейнеров. С их помощью вы можете быстро менять параметры вашего приложения, адаптируя его под различные среды и условия. Мы рассмотрели, как задавать переменные окружения в Dockerfile, как переопределять их при запуске контейнера, и как удобно управлять ими при помощи файла `.env`. Теперь у вас есть все необходимые инструменты для гибкой настройки ваших Docker-контейнеров.

Переменные окружения позволяют настраивать контейнеры, но для построения масштабируемых систем необходимы знания о Docker Swarm и Ansible. На нашем курсе [Docker + Ansible - с нуля](https://purpleschool.ru/course/docker) вы получите все необходимые навыки. В первых 3 модулях уже доступно бесплатное содержание — начните погружаться в мир Docker прямо сегодня и узнайте, как автоматизировать развертывание и управление контейнерами.
