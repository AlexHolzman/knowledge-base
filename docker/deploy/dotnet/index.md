---
metaTitle: Платформа dotnet в Docker
metaDescription: Изучите, как интеграция платформы dotnet и Docker помогает создавать и развертывать приложения более эффективно - примеры конфигурации и возможности
author: Олег Марков
title: Платформа dotnet в Docker
preview: Погрузитесь в мир dotnet и Docker - узнайте, как использовать их совместно для создания, тестирования и развертывания приложений. Практические примеры и лучшая практика
---

## Введение

Платформа dotnet является одной из самых мощных и популярных для разработки программного обеспечения, особенно в экосистеме Windows. Однако с развитием технологий и появлением новых инструментов разработка уже не ограничивается одной лишь операционной системой. В данной статье мы рассмотрим, как dotnet интегрируется с Docker, мощной платформой для контейнеризации, и как это сочетание может упростить процесс разработки, тестирования и развертывания приложений.

Контейнеризация позволяет упаковать приложение и все необходимые для его работы компоненты в один контейнер. Это обеспечивает портативность и согласованность среды, независимо от того, где ваше приложение будет запускаться. Интеграция dotnet и Docker позволяет разработчикам создавать и развертывать приложения в контейнерах, что часто приводит к более эффективным и масштабируемым решениям.

Использование dotnet в Docker помогает создавать и развертывать приложения, но для масштабирования и автоматизации необходимы дополнительные инструменты. Если вы хотите детальнее погрузиться в Docker и научиться автоматизировать развертывание dotnet-приложений с помощью Ansible, а также создавать кластеры Docker Swarm для управления этими приложениями, приходите на наш большой курс [Docker + Ansible - с нуля](https://purpleschool.ru/course/docker). На курсе 159 уроков и 7 упражнений, AI-тренажеры для безлимитной практики с кодом и задачами 24/7, решение задач с живым ревью наставника, еженедельные встречи с менторами.

## Установка и настройка

### Установка Docker

Прежде чем приступить к созданию контейнеров для ваших dotnet приложений, убедитесь, что у вас установлен и настроен Docker. Независимо от вашей операционной системы, установка Docker достаточно проста, следуйте официальной [документации Docker](https://docs.docker.com/get-docker/) для вашей системы.

### Подготовка dotnet приложения

Чтобы воспользоваться Docker, у вас должно быть готово ваше dotnet приложение. Воспользуйтесь командой `dotnet new` для создания нового dotnet приложения. Например, вы можете создать простое консольное приложение:

```bash
dotnet new console -n MyDockerApp
cd MyDockerApp
```

Это создаст новую директорию `MyDockerApp` с базовым проектом.

### Создание Dockerfile

Dockerfile — это текстовый файл, содержащий команды для сборки Docker-образа. Давайте создадим `Dockerfile` в вашем проекте `MyDockerApp`.

```dockerfile
# Используем базовый образ из Microsoft
FROM mcr.microsoft.com/dotnet/sdk:6.0 AS build
WORKDIR /app

# Копируем и восстанавливаем зависимости
COPY *.csproj .
RUN dotnet restore

# Копируем остальной код и собираем приложение
COPY . .
RUN dotnet publish -c Release -o out

# Отдельный этап для запуска приложения
FROM mcr.microsoft.com/dotnet/aspnet:6.0
WORKDIR /app
COPY --from=build /app/out .
ENTRYPOINT ["dotnet", "MyDockerApp.dll"]
```

Этот файл описывает два этапа: сборка приложения и его запуск. На этапе сборки приложение восстанавливает зависимости и публикуется в папку `out`. На этапе исполнения копируется конечный артефакт сборки в легковесный runtime-образ.

## Сборка и запуск контейнера

После создания Dockerfile теперь можно собрать Docker-образ и запустить контейнер.

### Сборка Docker-образа

Откройте терминал в директории вашего проекта и выполните команду:

```bash
docker build -t mydockerapp .
```

Этот процесс создаст образ `mydockerapp`.

### Запуск контейнера

Теперь, когда образ создан, проведем запуск вашего dotnet приложения в контейнере:

```bash
docker run --rm mydockerapp
```

Флаг `--rm` автоматически удаляет контейнер после его остановки. Эта команда запустит ваш dotnet-приложение в Docker-контейнере.

## Использование Docker Compose

Для более сложных приложений, которые состоят из нескольких сервисов, таких как база данных и backend-сервис, полезно использовать Docker Compose. Он позволяет управлять множественными контейнерами как одним целым.

### Создание файла docker-compose.yml

Создайте файл `docker-compose.yml` в корневой директории вашего проекта, добавьте следующий код:

```yaml
version: '3.4'

services:
  mydockerapp:
    build: .
    ports:
      - "8080:80"
```

Этот файл выполняет сборку образа и запускает его, включая проброс порта из контейнера в вашу машину.

### Запуск через Docker Compose

Чтобы запустить приложение с помощью Docker Compose, используйте команду:

```bash
docker-compose up
```

Эта команда запустит все сервисы, определенные в `docker-compose.yml`.

## Заключение

Интеграция платформы dotnet и Docker предоставляет разработчикам мощный инструмент для контейнеризации приложений, что упрощает их развертывание и масштабирование. У вас есть возможность упаковывать, тестировать и развертывать приложения в стандартизованной и изолированной среде. Это способствует более быстрому и надежному процессу разработки и внедрения ПО. Следуя приведенным в статье инструкциям, вы можете начать использовать это мощное сочетание инструментов в своих проектах, повышая их качество и надежность.

Развертывание dotnet в Docker – это только начало. Для эффективного управления инфраструктурой требуется автоматизация. На нашем курсе [Docker + Ansible - с нуля](https://purpleschool.ru/course/docker) вы научитесь использовать Ansible для автоматизации развертывания dotnet-приложений, а также познакомитесь с Docker Swarm для создания кластеров. Первые 3 модуля уже доступны бесплатно – начните погружение в мир Docker и Ansible уже сегодня.
