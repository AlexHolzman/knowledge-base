---
metaTitle: Запуск Node.js-приложений в Docker
metaDescription: Узнайте, как успешно запустить ваши Node.js-приложения в контейнерах Docker, используя практические примеры и шаги для настройки окружения
author: Олег Марков
title: Запуск Node.js-приложений в Docker
preview: Поймите, как развертывать ваши Node.js-приложения в Docker-контейнерах с помощью простых шагов и примеров кода, которые делают процесс понятным даже для новичков
---

## Введение

В наше время контейнеризация приложений становится все более популярной. Docker — это одна из ведущих платформ для контейнеризации, которая позволяет запускать приложения изолированно, независимо от их окружения. В этой статье я расскажу вам, как запустить Node.js-приложения в Docker. Давайте разберемся, как это сделать шаг за шагом.

## Создание Dockerfile

Первый шаг к запуску вашего Node.js-приложения в Docker — это создание Dockerfile. Это файл, который содержит инструкции для сборки Docker-образа. Вот пример простого Dockerfile для Node.js:

```Dockerfile
# Используем официальный образ Node.js
FROM node:14

# Создаем рабочую директорию
WORKDIR /app

# Копируем package.json и package-lock.json
COPY package*.json ./

# Устанавливаем зависимости
RUN npm install

# Копируем все файлы в рабочую директорию
COPY . .

# Приложение будет слушать на этом порту
EXPOSE 3000

# Команда для запуска приложения
CMD ["node", "app.js"]
```

В этом Dockerfile мы используем официальный образ Node.js, устанавливаем все зависимости и указываем Docker, какой порт будет использоваться. Затем прописываем команду для запуска приложения. Как видите, все просто и интуитивно понятно.

### Основные компоненты Dockerfile

- **FROM** — определяет базовый образ, который будет использован.
- **WORKDIR** — задает директорию внутри контейнера, где ваше приложение будет работать.
- **COPY** — копирует файлы из вашего проекта в контейнер.
- **RUN** — выполняет команды внутри контейнера, например, установка зависимостей.
- **EXPOSE** — указывает, какой порт будет использоваться приложением.
- **CMD** — указывает команду, которая будет выполняться при запуске контейнера.

Успешный запуск Node.js-приложения в Docker – это важный шаг, но для эффективной разработки и развертывания необходимо уметь управлять сетями, томами и использовать docker-compose. Если вы хотите детальнее погрузиться в Docker и узнать, как создавать многоконтейнерные приложения Node.js и автоматизировать их развертывание, приходите на наш большой курс [Docker + Ansible - с нуля](https://purpleschool.ru/course/docker). На курсе 159 уроков и 7 упражнений, AI-тренажеры для безлимитной практики с кодом и задачами 24/7, решение задач с живым ревью наставника, еженедельные встречи с менторами.

## Сборка Docker-образа

Следующим шагом будет сборка Docker-образа. Для этого вы должны находиться в каталоге, где лежит ваш Dockerfile. Затем выполните команду:

```bash
docker build -t my-node-app .
```

Обратите внимание на флаг `-t`, который позволяет вам присвоить имя вашему образу (в данном случае `my-node-app`). Точка (`.`) в конце команды указывает, что сборка будет происходить в текущей директории. Давайте теперь разберем шаги, происходящие в этой команде.

### Что происходит при сборке образа

1. Docker читает инструкции из Dockerfile.
2. Каждая инструкция создает слой в Docker-образе.
3. Все слои кешируются, что делает повторные сборки более быстрыми.
4. Итоговый образ содержит все слои и готов для запуска.

## Запуск контейнера

Теперь, когда у нас есть собранный образ, мы можем запустить контейнер. Сделать это можно следующей командой:

```bash
docker run -p 3000:3000 my-node-app
```

Эта команда запускает контейнер с нашим образом `my-node-app` и перенаправляет порт 3000 внутри контейнера на порт 3000 на хосте, чтобы приложение было доступно извне. Команда `run` также загружает контейнер, если он еще не был запущен.

### Разбираем команду `docker run`

- **-p** — маппинг портов. В данном случае это означает, что запросы на порт 3000 хоста перенаправляются на порт 3000 контейнера. 
- **my-node-app** — это имя образа, который вы хотите запустить.

## Проверка работы приложения

Убедитесь, что ваше приложение работает, открыв веб-браузер и введя:

```
http://localhost:3000
```

Если все настроено верно, вы должны увидеть страницу, которую вы ожидали увидеть, когда приложение работает локально. Это означает, что ваш контейнер успешно запущен и обслуживает запросы.

## Заключение

Запуск Node.js-приложений в Docker — это мощный способ развертывания и изоляции вашего приложения от окружения. Используя Dockerfile, вы можете легко управлять зависимостями и средой для вашего приложения. Надеюсь, эта статья помогла вам понять основные шаги процесса контейнеризации с Docker. Теперь вы знаете, как создать Dockerfile, собрать образ и запустить контейнер, что делает вас на шаг ближе к профессиональному подходу к развертыванию приложений.

Docker для Node.js-приложений – это удобно, но для реальных проектов необходима автоматизация и CI/CD. На нашем курсе [Docker + Ansible - с нуля](https://purpleschool.ru/course/docker) вы узнаете, как автоматизировать развертывание Docker окружения с помощью Ansible и создавать кластеры с Docker Swarm. В первых 3 модулях уже доступно бесплатное содержание — начните погружаться в мир Docker прямо сегодня.
