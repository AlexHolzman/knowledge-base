---
metaTitle: Как использовать root для хранения данных в Docker
metaDescription: Узнайте как эффективно использовать root для хранения данных в Docker - лучшие практики и примеры кода для начала работы
author: Олег Марков
title: Как использовать root для хранения данных в Docker
preview: Узнайте как эффективно использовать root для хранения данных в Docker применяя базовые методики и наглядные примеры кода чтобы оптимизировать свой рабочий процесс
---

## Введение

Docker стал неотъемлемым инструментом для разработчиков по всему миру. Он позволяет легко упаковывать приложения в контейнеры, что делает их переносимыми и изолированными от окружающей среды. Однако, когда дело доходит до хранения данных в контейнерах, у многих возникают вопросы. В этой статье мы сосредоточимся на использовании root, чтобы оптимизировать хранение данных в Docker. Мы рассмотрим, как это работает, и какие преимущества это может принести вашему рабочему процессу.

## Понимание файловой системы Docker

Прежде чем углубиться в тему, давайте сначала разберемся, как работает файловая система Docker. Когда вы создаете контейнер, Docker использует файловую систему, называемую OverlayFS, чтобы собрать образ из различных слоев. Каждый слой добавляет изменения, которые отличают его от предыдущего, а все они вместе образуют работающий контейнер. Все это сохраняется в /var/lib/docker, но что, если нам нужно непосредственно работать с root для хранения данных? Переходим к следующему разделу.

Использование `root` для хранения данных в Docker может быть небезопасным. Чтобы обеспечить безопасное хранение данных, важно понимать, как работают тома и как правильно настроить права доступа. Если вы хотите детальнее погрузиться в Docker, узнать про настройку VM на Linux, базовые понятия Docker, Docker image, сети Docker — приходите на наш большой курс [Docker + Ansible - с нуля](https://purpleschool.ru/course/docker). На курсе 159 уроков и 7 упражнений, AI-тренажеры для безлимитной практики с кодом и задачами 24/7, решение задач с живым ревью наставника, еженедельные встречи с менторами.


### Использование volume (объемов) для хранения данных

Одним из методов хранения данных в Docker является использование volumes. Volumes помогают отделить жизненный цикл данных от жизненного цикла контейнеров. Они позволяют хранить данные за пределами containers, что особенно важно для долгосрочного сохранения информации.

#### Создание volume

Давайте узнаем, как создать volume в Docker. Использование volumes довольно просто:

```bash
docker volume create my-volume
```

// Эта команда создаст новый volume с именем my-volume

Теперь вы можете использовать этот volume в своих контейнерах. Для примера давайте подключим его к контейнеру.

#### Подключение volume к контейнеру

```bash
docker run -d \
  --name my-container \
  -v my-volume:/app/data \
  ubuntu
```

// -v my-volume:/app/data указывает, что volume my-volume будет подключен к папке /app/data внутри контейнера

### Использование bind mounts

Если вам нужно больше контроля над тем, где находятся ваши данные на хост-системе, вы можете использовать bind mounts. Они позволяют вам указать путь к конкретной папке на вашем хосте, которая будет использоваться контейнером.

#### Работа с bind mounts

Допустим, у вас есть данные, которые нужно держать на вашем отдельном сервере, и вы хотите, чтобы контейнер имел к ним доступ.

```bash
docker run -d \
  --name my-container \
  -v /path/on/host:/app/data \
  ubuntu
```

// -v /path/on/host:/app/data указывает путь на хосте, который будет отображаться в контейнере

### Использование root в Docker

Теперь самое интересное: использование root. Иногда бывает полезно хранить данные непосредственно в корневой файловой системе вашего контейнера. Это может быть полезно для временного хранения, кэширования или других специфических задач.

#### Пример хранения данных в root

Давайте посмотрим, как можно работать с root в вашем контейнере. Например, для хранения временных файлов:

```bash
docker run -it ubuntu bash
```

// Запуск интерактивного сеанса bash в образе Ubuntu

Теперь, находясь внутри контейнера, вы можете использовать команду touch для создания файла в корневой директории:

```bash
touch /data-file.txt
```

// Эта команда создаст пустой файл data-file.txt в корне контейнера

Важно помнить, что данные, размещенные напрямую в файловой системе контейнера, исчезнут после его удаления. Поэтому для долгосрочного хранения рекомендуется использовать volumes или bind mounts.

## Заключение

Docker предоставляет мощные инструменты для управления данными в контейнерах. Использование volumes, bind mounts и даже корневой файловой системы контейнера открывает широкие возможности по управлению данными в зависимости от ваших нужд. Каждый из этих подходов имеет свои преимущества и ограничения, и понимание их особенностей поможет вам оптимизировать вашу работу с данными в Docker. Для долгосрочного хранения и удобства доступа предпочтительно использовать volumes, тогда как для временных или специфичных задач можно использовать bind mounts или хранение данных в root контейнера. Надеюсь, эта статья помогла вам понять, как эффективнее использовать Docker для хранения данных. Теперь вы лучше представляете себе, как ваши контейнеры могут взаимодействовать с данными, будь то краткосрочное или долговременное хранение.

Для автоматизации управления томами и правами доступа в Docker можно использовать Ansible. На нашем курсе [Docker + Ansible - с нуля](https://purpleschool.ru/course/docker) вы научитесь автоматизировать эти задачи. В первых 3 модулях уже доступно бесплатное содержание — начните погружаться в Docker и Ansible прямо сегодня.
