---
metaTitle: GitLab в Docker
metaDescription: Разверните GitLab в Docker, чтобы повысить гибкость и масштабируемость вашей среды разработки - узнайте как настроить и использовать различные функции GitLab для управления проектами
author: Олег Марков
title: GitLab в Docker
preview: Разверните GitLab в Docker для гибкости и масштабируемости - руководство по настройке и использованию
---

## Введение

Если вы ищете способ упростить управление вашим репозиторием кода и проектами, а также сделать это все более гибким и масштабируемым, вы пришли по адресу. В этой статье я расскажу вам, как развернуть GitLab в Docker. Docker — это инструмент, который позволяет упаковывать приложения и их зависимости в контейнеры, чтобы они могли легко запускаться на разных платформах. Объединив силы с GitLab — мощной платформой для DevOps, вы получите гибкий и надежный инструмент для управления своими проектами.

Вместе с вами мы рассмотрим процесс установки и запуска GitLab в контейнере Docker на вашем сервере. Я предоставлю примеры, пояснения и советы, которые помогут вам справиться с этой задачей, даже если вы совсем недавно познакомились с Docker и GitLab.

Развертывание GitLab в Docker позволяет повысить гибкость и масштабируемость вашей среды разработки. Если вы хотите детальнее погрузиться в работу с GitLab в Docker и узнать, как эффективно использовать различные функции GitLab для управления проектами — приходите на наш большой курс [Docker + Ansible - с нуля](https://purpleschool.ru/course/docker?utm_source=knowledgebase&utm_medium=text&utm_campaign=GitLab_v_Docker
). На курсе 159 уроков и 7 упражнений, AI-тренажеры для безлимитной практики с кодом и задачами 24/7, решение задач с живым ревью наставника, еженедельные встречи с менторами. Вы научитесь создавать Docker-образы, настраивать сети и тома, а также автоматизировать развертывание приложений с помощью Ansible.

## Установка Docker

Прежде чем мы начнем развертывание GitLab, убедимся, что Docker установлен и настроен на вашем сервере. Docker предоставляет очень удобные инструкции по установке на различные операционные системы. Здесь я покажу вам, как это сделать на Ubuntu. Если у вас другая операционная система, вы найдете соответствующую документацию на официальном сайте Docker.

### Шаг 1: Обновление существующего списка пакетов

Первым шагом будет обновление списка пакетов:

```bash
sudo apt-get update
```

Это команда обновляет индексы пакетов, чтобы у вас была самая последняя информация о доступных для установки пакетах.

### Шаг 2: Установка пакетов для HTTPS

Далее установим несколько пакетов, которые позволят apt использовать репозитории через HTTPS:

```bash
sudo apt-get install apt-transport-https ca-certificates curl software-properties-common
```

Эти пакеты необходимы для того, чтобы мы могли безопасно передавать и принимать информацию с удаленных серверов.

### Шаг 3: Добавление официального GPG-ключа Docker

Теперь загрузим и добавим GPG-ключ официального репозитория Docker:

```bash
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
```

Этот ключ используется для подтверждения подлинности пакетов Docker.

### Шаг 4: Добавление репозитория Docker

Затем добавим сам репозиторий Docker в источники apt:

```bash
sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"
```

Это действие добавит адрес репозитория в список источников вашего apt и позволит вам скачать пакеты Docker.

### Шаг 5: Установка Docker

Теперь мы готовы установить Docker:

```bash
sudo apt-get update
sudo apt-get install docker-ce
```

После успешной установки убедимся, что Docker работает:

```bash
sudo systemctl status docker
```

Если вы видите вывод с активным состоянием (active), значит Docker успешно установлен и работает.

## Установка GitLab в Docker

Теперь, когда у нас есть работающий Docker, мы можем приступить к установке GitLab.

### Шаг 1: Создание Docker-сети

Создадим изолированную сеть Docker для GitLab:

```bash
docker network create gitlab-network
```

Она обеспечивает контейнерам GitLab возможность взаимодействовать друг с другом в пределах одной сети.

### Шаг 2: Запуск контейнера GitLab

Теперь давайте запустим контейнер с GitLab:

```bash
docker run --detach \
  --hostname gitlab.example.com \
  --publish 443:443 --publish 80:80 --publish 22:22 \
  --name gitlab \
  --restart always \
  --network gitlab-network \
  --volume /srv/gitlab/config:/etc/gitlab \
  --volume /srv/gitlab/logs:/var/log/gitlab \
  --volume /srv/gitlab/data:/var/opt/gitlab \
  gitlab/gitlab-ce:latest
```

- `--detach` — запускает контейнер в фоновом режиме
- `--hostname` — задает имя хоста для GitLab
- `--publish` — перенаправляет порты хоста на порты контейнера
- `--name` — задает имя контейнера
- `--restart` — автоматически перезапускает контейнер в случае его остановки
- `--network` — присоединяет контейнер к сети GitLab
- `--volume` — монтирует локальные директории для сохранения конфигурации, логов и данных

Теперь у вас работает GitLab на вашем сервере.

## Настройка GitLab

После установки давайте разберемся с некоторыми важными настройками для работы GitLab.

### Административные параметры

Когда вы впервые посетите ваш GitLab по адресу `http://gitlab.example.com`, вам будет предложено установить пароль администратора. Установите безопасный пароль и войдите как ситема администратор.

### Добавление проектов и пользователей

Теперь, когда вы вошли, начните добавлять свои проекты вручную или создайте новые. Вы также можете пригласить коллег присоединиться, создав для них учетные записи пользователей и предоставив соответствующие привилегии.

#### Пример: Создание проекта

1. Перейдите в Projects.
2. Нажмите на "New Project".
3. Заполните форму и нажмите "Create Project".

Это простой процесс, который легко освоить.

### Интеграция и расширения

GitLab поддерживает интеграцию с различными сервисами и инструментами, такими как JIRA, Slack и другими. Это позволяет вам создать полноценный DevOps-процесс от написания кода до его развертывания.

## Заключение

Теперь, когда вы знакомы с тем, как развернуть GitLab в Docker, у вас есть мощный инструмент для управления проектами. GitLab в Docker предлагает не только гибкость в развертывании и миграции, но и целый ряд возможностей по обеспечению рабочего процесса от начала и до конца. Применение Docker позволяет создать изолированную и управляемую среду, которая легко адаптируется под ваши нужды. Я надеюсь, что эта статья оказалась для вас полезной и теперь у вас нет преград для развертывания собственного GitLab сервера.

Для автоматизации развертывания и настройки GitLab в Docker можно использовать Ansible. На нашем курсе [Docker + Ansible - с нуля](https://purpleschool.ru/course/docker?utm_source=knowledgebase&utm_medium=text&utm_campaign=GitLab_v_Docker) вы научитесь автоматизировать эти задачи. В первых 3 модулях уже доступно бесплатное содержание — начните погружаться в Docker и Ansible прямо сегодня.
