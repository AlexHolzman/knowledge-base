---
metaTitle: Копирование данных с помощью copy в Docker
metaDescription: Ознакомьтесь с возможностями команды COPY в Docker - её применение для переноса файлов в контейнеры выполнение более сложных задач и обеспечение взаимодействия между контейнерами
author: Олег Марков
title: Копирование данных с помощью copy в Docker
preview: Давайте разберемся как использовать команду COPY в Docker для эффективного и безопасного копирования данных и файлов в контейнеры

---

## Введение

Docker предоставляет множество возможностей для управления контейнерами и их содержимым. Одной из таких возможностей является копирование данных с использованием команды `COPY`. Эта команда позволяет легко переносить файлы и папки из вашей локальной файловой системы в контейнер Docker. В этой статье мы поговорим о том, как правильно использовать COPY, разберем синтаксис и некоторые подводные камни, которые могут встретиться на вашем пути. Всё это будет изложено в доступной и дружелюбной форме, чтобы вы могли использовать Docker с комфортом.

Команда COPY — это базовый инструмент, но для эффективного управления образом необходимо понимать, как правильно выстраивать слои, использовать многоступенчатую сборку и автоматизировать процесс. Если вы хотите детальнее погрузиться в мир Docker — приходите на наш большой курс [Docker + Ansible - с нуля](https://purpleschool.ru/course/docker?utm_source=knowledgebase&utm_medium=text&utm_campaign=Kopirovanie_dannykh_s_pomoshchyu_copy_v_Docker). На курсе 159 уроков и 7 упражнений, AI-тренажеры для безлимитной практики с кодом и задачами 24/7, решение задач с живым ревью наставника, еженедельные встречи с менторами. Вы научитесь создавать эффективные Dockerfile, использовать многоступенчатую сборку и автоматизировать развертывание.

## Команда COPY в Docker

### Синтаксис COPY

Начнем с изучения синтаксиса команды `COPY` и того, как её можно использовать. Один из наиболее простых способов понять, как работает команда, — это взглянуть на её базовую форму:

```dockerfile
COPY <SOURCE> <DESTINATION>
```

Давайте разберемся на примере:

- **SOURCE** — источник, указывающий на файл или папку в вашей локальной файловой системе, которую вы хотите скопировать.
- **DESTINATION** — путь в контейнере, куда вы хотите поместить эти данные. 

Теперь вы увидите, как это выглядит в коде:

```dockerfile
# Копируем файл index.html в корневую папку контейнера
COPY index.html /usr/share/nginx/html/
```

На примере выше, мы копируем локальный файл `index.html` в директорию `/usr/share/nginx/html/` внутри контейнера. Это может быть полезно, если вы хотите развернуть статический сайт на nginx.

### Поддержка контекста сборки

COPY работает в контексте сборки образа. Это значит, что вы можете скопировать только те файлы, которые доступны в текущем контексте. Давайте посмотрим, что это значит на практике.

Когда вы запускаете `docker build`, вы передаете путь к контексту сборки. Все файлы в этом контексте доступны для копирования в ваш контейнер.

Пример команды для запуска:

```bash
docker build -t myapp .
```

Здесь `.` указывает на текущую директорию как на контекст сборки. Убедитесь, что все файлы, которые вы хотите скопировать, находятся в этой директории или в её поддиректориях.

### Советы по использованию COPY

Давайте разберём некоторые советы и рекомендации по использованию COPY, которые сделают вашу работу с Docker более эффективной:

#### Оптимизация размеров

Важно помнить, что каждый раз, когда вы используете команду COPY, создаётся новый слой образа. Поэтому, для оптимизации пространства, постарайтесь минимизировать количество команд COPY в вашем Dockerfile.

#### Установка правильных прав доступа

Часто после копирования файлов возникает необходимость установить определенные права доступа. Вы можете задать их командой `RUN chmod` сразу после копирования:

```dockerfile
# Копирование файлов приложения
COPY app/ /app/

# Установка прав на папку с приложением
RUN chmod -R 755 /app
```

Это позволит вашему приложению корректно работать внутри контейнера.

### Другие возможности команды COPY

COPY поддерживает дополнительную функциональность, например, использование `--chown`, чтобы изменить владельца файлов при их копировании.

```dockerfile
# Копирование файла с изменением владельца
COPY --chown=user:group source/ /destination/
```

Данный пример позволяет установить владельца и группу для всех копируемых файлов и папок, что бывает необходимо для обеспечения правильных условий исполнения вашего приложения.

## Заключение

Команда COPY в Docker — мощный инструмент для управления содержимым контейнеров. Она предоставляет простой и надежный способ загрузки файлов и директорий из вашего локального окружения в контейнер. Будь то статические файлы для веб-сервера или исходный код приложения, команда COPY поможет вам с легкостью осуществлять перенос данных в ваши контейнеры, гарантируя надежную работу вашего приложения. Надеюсь, эта статья помогла вам лучше понять, как использовать COPY в своих проектах с Docker!

Команда COPY значительно упрощает перенос файлов в Docker, но для развертывания в production необходима автоматизация и оркестрация. На нашем курсе [Docker + Ansible - с нуля](https://purpleschool.ru/course/docker?utm_source=knowledgebase&utm_medium=text&utm_campaign=Kopirovanie_dannykh_s_pomoshchyu_copy_v_Docker) вы изучите, как создавать Docker Swarm кластеры, использовать Ansible для автоматизации развертывания и строить системы мониторинга. В первых 3 модулях уже доступно бесплатное содержание — начните погружаться в мир Docker и Ansible прямо сегодня.
