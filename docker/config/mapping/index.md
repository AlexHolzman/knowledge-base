---
metaTitle: Mapping в Docker - как использовать
metaDescription: Узнайте о Mapping в Docker - как контейнеры могут взаимодействовать с файловой системой хоста, изучите основные команды и подходы создания маппинга.
author: Олег Марков
title: Mapping в Docker - как использовать
preview: Исследуйте процесс маппинга в Docker - зачем он нужен, как он реализован и как правильно настроить его для вашего контейнера. Подробные примеры помогут вам освоить тему легко.
---

## Введение

Маппинг в Docker представляет собой важный аспект взаимодействия контейнеров с файловой системой хост-машины. В контейнеризованных приложениях часто требуется, чтобы контейнер мог использовать данные или конфигурационные файлы, хранящиеся на хосте. Это позволяет сохранять данные при перезапусках контейнера и делиться ими между несколькими контейнерами. В этом руководстве вы познакомитесь с концепцией маппинга в Docker, узнаете о его преимуществах, настройках и использовании в практике.

### Основные понятия Docker

Прежде чем перейти к подробному изучению маппинга, стоит освежить в памяти некоторые основные понятия Docker, такие как образы, контейнеры и тома.

- **Образ Docker** - это неизменяемый шаблон, содержащий все необходимое для запуска вашего приложения на Docker, включая код приложения, зависимости и все требуемые параметры.
  
- **Контейнер Docker** - запущенный экземпляр образа, который изолирован от других экземпляров и работает в своей среде выполнения.
  
- **Том Docker** - способ постоянного хранения данных, которые генерируются и используются контейнером.

## Как работает маппинг в Docker

Маппинг в Docker позволяет связывать файлы и директории из файловой системы хост-машины с файловой системой контейнера. Это достигается с помощью бинд-монтирования и волюмов. Давайте разберемся с каждым из этих способов.

### Бинд-монтирование

Бинд-монтирование предоставляет возможность монтировать файл или директорию из файловой системы хоста в контейнер.

```bash
# Запустим контейнер с маппингом директории
docker run -v /path/to/host/directory:/path/in/container your_image
```

В этой команде:

- `/path/to/host/directory` - путь на хосте, который вы хотите замапить.
- `/path/in/container` - путь в контейнере, где будет доступен данный ресурс.

В результате контейнер сможет читать и записывать в указанную директорию на хосте.

### Волюмы Docker

В отличие от бинд-монтирования, волюмы управляются Docker. Они более удобны в использовании для создания взаимозависимых контейнеров, так как обеспечивают лёгкое управление и переносимость данных. Волюмы могут быть созданы заранее или автоматически при запуске контейнера.

```bash
# Создаем том
docker volume create my_volume

# Запускаем контейнер с маппингом тома
docker run -v my_volume:/path/in/container your_image
```

В этом примере:

- `my_volume` - создается и управляется Docker.
- `/path/in/container` - директория в контейнере, где будет использован том.

## Преимущества использования маппинга

### Постоянство данных

За счет использования маппинга, особенно с томами, ваши данные сохраняются даже при перезапусках или удалении контейнеров. Это критично для приложений, где потеря данных недопустима.

### Совместное использование данных

Маппинг обеспечивает возможность совместного использования одних и тех же данных несколькими контейнерами. Это полезно, например, при использовании общего кэша или конфигурационных файлов.

### Удобство разработки и тестирования

При разработке приложений с Docker, маппинг позволяет мгновенно видеть изменения без необходимости пересоздания образов или перезапуска контейнеров. Это ускоряет цикл разработки.

### Обратная связь с инструментами сборки

С Docker маппингом легко интегрировать инструменты сборки, такие как Maven, npm или gradle, обеспечивая быстрые итерации разработки.

## Пример использования маппинга

Давайте рассмотрим реальный сценарий использования маппинга в Docker, где необходимо разработать веб-приложение, используя Node.js и React, с сохранением узловой среды на хосте.

### Подготовка проекта

Предположим, у вас есть проект на React, и структура выглядит следующим образом:

```
/my-project
|-- node_modules
|-- public
|-- src
|-- package.json
```

### Настройка Dockerfile

```dockerfile
# Установим базовый образ
FROM node:14

# Создаем рабочую директорию
WORKDIR /usr/src/app

# Копируем файлы package.json и package-lock.json
COPY package*.json ./

# Устанавливаем зависимости
RUN npm install

# Копируем весь проект в контейнер
COPY . .

# Команда для запуска приложения
CMD [ "npm", "start" ]
```

### Запуск контейнера с маппингом

Теперь создадим и запустим контейнер с бинд-монтированием локальной директории:

```bash
# Переходим в директорию проекта
cd /my-project

# Запускаем контейнер с бинд-монтированием
docker run -v $(pwd):/usr/src/app -p 3000:3000 node_image
```

Здесь происходит маппинг текущей директории к рабочей директории контейнера, что позволяет вам изменять код локально и тут же видеть изменения в запущенном приложении.

## Заключение

Маппинг в Docker - это мощный инструмент, позволяющий эффективно связывать файловую систему хост-машины и контейнера. Освоив его возможности, вы сможете строить масштабируемые, гибкие приложения, где данные надежно хранятся и могут использоваться несколькими контейнерами. Будь то разработка, тестирование или размещение на продакшен-средах, понимание и правильное использование маппинга существенно облегчит вашу работу с Docker.