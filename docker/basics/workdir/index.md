---
metaTitle: Как настроить рабочую директорию в Docker
metaDescription: Исследуйте, как правильно настроить рабочую директорию в Docker с помощью команды WORKDIR - настройка, примеры, советы для вашего Dockerfile
author: Олег Марков
title: Как настроить рабочую директорию в Docker
preview: Покажу, как работает команда WORKDIR в Docker. Вы научитесь задавать и изменять рабочую директорию в Dockerfile и увидите, как это помогает организовать контейнеры
---

## Введение

Docker — это инструмент, который позволяет упаковку, доставку и использование приложений в изолированных контейнерах. Каждый контейнер представляет собой отдельную и независимую среду выполнения. Одной из ключевых особенностей, с которой вы столкнетесь при работе с Docker, является настройка рабочей директории контейнера. Это достигается с помощью команды `WORKDIR`. В этой статье мы рассмотрим, как использовать `WORKDIR`, чтобы обеспечить эффективную работу ваших приложений в Docker-контейнерах.

## Как работает WORKDIR в Docker

WORKDIR — это инструкция в Dockerfile, которая задает рабочую директорию для последующих команд, определенных в Dockerfile. Эта команда определяет, где будут выполняться все последующие команды, если не указано иное место. Настройка рабочей директории позволяет упорядочить структуру контейнера и делает вашу сборку более читаемой и управляемой. Теперь давайте разберем, как настроить `WORKDIR` на практике.

### Настройка WORKDIR

#### Зачем нужна WORKDIR

Когда вы пишете Dockerfile, вы определяете инструкции, которые Docker будет выполнять для сборки образа. Каждая инструкция, такая как `COPY`, `RUN` или `CMD`, может работать с разными директориями. Без `WORKDIR` вам нужно будет постоянно указывать полный путь к каждому файлу или директории. Используя `WORKDIR`, вы задаете базовую точку, относительно которой будут выполняться все команды.

Правильная настройка рабочей директории важна для организации кода в контейнере. Для автоматизированного развертывания и управления конфигурацией на нескольких серверах используют Ansible. На нашем курсе [Docker + Ansible - с нуля](https://purpleschool.ru/course/docker?utm_source=knowledgebase&utm_medium=text&utm_campaign=Kak_nastroit_rabochuyu_direktoriyu_v_Docker) вы научитесь автоматизировать развертывание и настройку контейнеров с помощью Ansible. На курсе 159 уроков и 7 упражнений, AI-тренажеры для безлимитной практики с кодом и задачами 24/7, решение задач с живым ревью наставника, еженедельные встречи с менторами.

#### Простая настройка WORKDIR

Давайте начнем с простого примера. Представьте, что у вас есть приложение, которое вы хотите упаковать в Docker. Смотрите, я покажу вам, как это работает:

```dockerfile
FROM ubuntu:latest

# Устанавливаем рабочую директорию
WORKDIR /app

# Копируем файлы в рабочую директорию
COPY . .

# Устанавливаем зависимости
RUN apt-get update && apt-get install -y python3

# Запускаем приложение
CMD ["python3", "app.py"]
```

В этом Dockerfile мы используем `WORKDIR /app`, чтобы установить директорию `/app` в качестве рабочей. Все последующие команды, такие как `COPY` и `RUN`, будут выполняться из этой директории. Это делает Dockerfile более лаконичным и легким для понимания.

#### Несколько инструкций WORKDIR

Вы можете использовать несколько инструкций `WORKDIR` в одном Dockerfile. Каждая новая инструкция `WORKDIR` задает новое местоположение для выполнения следующих команд. Взгляните на этот пример:

```dockerfile
FROM ubuntu:latest

# Устанавливаем первую рабочую директорию
WORKDIR /app

# Копируем файлы приложения
COPY app_source .

# Меняем рабочую директорию
WORKDIR /logs

# Устанавливаем зависимости в новой рабочей директории
RUN apt-get update && apt-get install -y logrotate

# Возвращаемся в первую рабочую директорию для запуска приложения
WORKDIR /app
CMD ["python3", "app.py"]
```

Как видите, в этом примере мы меняем рабочую директорию несколько раз. Это полезно, когда у вас есть разные файлы или папки в разных местах и вы хотите упорядочить их конкретным образом.

### Относительные пути в WORKDIR

WORKDIR поддерживает не только абсолютные, но и относительные пути. При использовании относительного пути директория будет создана относительно текущей `WORKDIR`. Давайте разберемся на примере:

```dockerfile
FROM ubuntu:latest

WORKDIR /app

# Переходим в поддиректорию
WORKDIR src

# Текущая рабочая директория теперь /app/src
CMD ["echo", "Current directory is /app/src"]
```

В этом примере мы начинаем с установки `WORKDIR` в `/app`. Затем мы перемещаем текущую рабочую директорию на уровень ниже, в поддиректорию `src`, используя относительный путь.

#### Создание директории

Если указанная директория не существует, Docker создаст ее для вас. Это значит, что команда `WORKDIR /app` создаст директорию `/app`, если она ещё не существует.

## Заключение

Настройка рабочей директории - это базовый, но важный шаг. Для управления сложными инфраструктурами необходима автоматизация. Ansible позволяет описать инфраструктуру в виде кода и автоматизировать ее развертывание и поддержку. На нашем курсе [Docker + Ansible - с нуля](https://purpleschool.ru/course/docker?utm_source=knowledgebase&utm_medium=text&utm_campaign=Kak_nastroit_rabochuyu_direktoriyu_v_Docker) вы освоите Ansible и сможете автоматизировать создание и развертывание Docker-контейнеров. В первых 3 модулях уже доступно бесплатное содержание — начните погружаться в мир Docker и Ansible прямо сегодня.

WORKDIR — одна из ключевых команд в Dockerfile, которая помогает управлять и оптимизировать выполнение команд в контейнере. Она упрощает расположение и работу с файлами, избавляя вас от необходимости уточнять пути в каждой команде. Большинство приложений будет проще и понятнее, если вы правильно настроите рабочую директорию. Надеюсь, информация и примеры, приведенные в этой статье, стали для вас полезными и помогли глубже понять, как эффективно использовать `WORKDIR` в Docker.
