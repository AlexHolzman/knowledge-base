---
metaTitle: Работа с CI/CD с GitLab CI и Jenkins
metaDescription: Разбираемся c CI/CD с GitLab CI и Jenkins
author: Александр Гольцман
title: Автоматизация Golang проектов — CI/CD с GitLab CI и Jenkins
preview: В этой статье я покажу, как настроить CI/CD для Go-проектов с помощью GitLab CI и Jenkins, а также объясню ключевые принципы автоматизации.
---

Автоматизация сборки и развертывания играет ключевую роль в разработке современных приложений, включая проекты на Go. Использование CI/CD (Continuous Integration / Continuous Deployment) позволяет сократить время на тестирование, уменьшить количество ошибок при развертывании и ускорить выпуск новых версий. В этой статье я покажу, как настроить CI/CD для Go-проектов с помощью GitLab CI и Jenkins, а также объясню ключевые принципы автоматизации.

### Почему CI/CD важен для Go-проектов?

Прежде чем перейти к настройке, давайте разберёмся, зачем нужна CI/CD-платформа в разработке на Go.

1. **Автоматизация тестирования**. Go имеет встроенную систему тестирования, и CI позволяет запускать тесты автоматически при каждом изменении кода.
2. **Единообразие сборок**. Автоматическая сборка гарантирует, что все версии приложения создаются одинаково, без зависимости от локальной среды разработчика.
3. **Быстрое развертывание**. CI/CD позволяет автоматически выкатывать новые версии без ручного вмешательства.
4. **Лёгкость интеграции**. GitLab CI и Jenkins поддерживают работу с Docker, Kubernetes и облачными платформами, что делает их удобными инструментами для Go-разработки.

Автоматизация с использованием CI/CD значительно упрощает процесс разработки и доставки приложений. Для эффективного использования CI/CD с Golang важно понимать основы языка, уметь писать тесты и структурировать код. Если вы хотите детальнее погрузиться в основы разработки на Golang, рекомендуем наш курс [Основы Golang](https://purpleschool.ru/course/go-basics?utm_source=knowledgebase&utm_medium=text&utm_campaign=avtomatizatsiya_golang_proektov_ci_cd_s_gitlab_ci_i_jenkins). На курсе 193 уроков и 16 упражнений, AI-тренажеры для безлимитной практики с кодом и задачами 24/7, решение задач с живым ревью наставника, еженедельные встречи с менторами.

Теперь давайте разберёмся, как настроить GitLab CI и Jenkins для автоматизации Go-проекта.

### Настройка CI/CD с GitLab CI

GitLab CI/CD встроен в экосистему GitLab и позволяет легко автоматизировать процесс сборки, тестирования и развертывания.

### Конфигурация `.gitlab-ci.yml`

Смотрите, в корне вашего репозитория нужно создать файл `.gitlab-ci.yml`, который определяет, как будет выполняться процесс CI/CD.

Простейший `.gitlab-ci.yml` для Go-проекта выглядит так:

```yaml
stages:
  - build
  - test

build:
  stage: build
  image: golang:1.20
  script:
    - go mod tidy
    - go build -o myapp .

test:
  stage: test
  image: golang:1.20
  script:
    - go test ./...
```

Здесь я разместил две стадии:

- `build` — сборка проекта;
- `test` — запуск тестов.

Этот файл GitLab CI автоматически выполнит сборку и тестирование приложения при каждом коммите.

### Добавление Docker и развертывания

Если нужно развернуть приложение в Docker, добавьте стадию деплоя:

```yaml
deploy:
  stage: deploy
  image: docker:latest
  services:
    - docker:dind
  script:
    - docker build -t my-dockerhub-user/myapp:latest .
    - docker push my-dockerhub-user/myapp:latest
  only:
    - main
```

Теперь при каждом изменении в `main`-ветке будет собираться Docker-образ и загружаться в реестр.

### Автоматизация с Jenkins

Jenkins — это гибкий инструмент для CI/CD, который позволяет создавать сложные пайплайны.

### Установка и запуск Jenkins

Если у вас Jenkins ещё не установлен, можно развернуть его через Docker:

```
docker run -d -p 8080:8080 --name jenkins jenkins/jenkins:lts
```

После этого зайдите в браузер по `http://localhost:8080`, настройте Jenkins и установите нужные плагины.

### Создание пайплайна

В Jenkins можно использовать файлы `Jenkinsfile` для определения процессов CI/CD. Вот пример для Go-проекта:

```groovy
pipeline {
    agent any

    stages {
        stage('Build') {
            steps {
                sh 'go mod tidy'
                sh 'go build -o myapp .'
            }
        }
        stage('Test') {
            steps {
                sh 'go test ./...'
            }
        }
        stage('Deploy') {
            steps {
                sh 'docker build -t my-dockerhub-user/myapp:latest .'
                sh 'docker push my-dockerhub-user/myapp:latest'
            }
        }
    }
}
```

Этот Jenkinsfile выполняет сборку, тестирование и загрузку Docker-образа.

### Запуск пайплайна

Добавьте `Jenkinsfile` в репозиторий, создайте новую задачу в Jenkins и настройте её на отслеживание изменений в репозитории. После этого при каждом коммите Jenkins будет автоматически запускать процесс CI/CD.

### Заключение

Автоматизация CI/CD для Go-проектов значительно упрощает процесс разработки и развертывания. В этой статье я показал, как использовать GitLab CI и Jenkins для автоматизации сборки, тестирования и развертывания приложений.

Если вам нужен быстрый и простой вариант, GitLab CI подойдёт лучше. Если же требуется больше контроля и гибкости, Jenkins станет хорошим выбором. В любом случае, автоматизация CI/CD поможет вам ускорить процесс разработки и минимизировать риски ошибок при развертывании.

Внедрение CI/CD, безусловно, важный шаг в автоматизации разработки, но он требует хорошего знания самого языка Golang.  Без понимания базовых концепций языка, таких как переменные, типы данных, функции и пакеты, сложно будет эффективно настраивать пайплайны и устранять возникающие проблемы. Узнать больше об основах Golang можно на курсе [Основы Golang](https://purpleschool.ru/course/go-basics?utm_source=knowledgebase&utm_medium=text&utm_campaign=avtomatizatsiya_golang_proektov_ci_cd_s_gitlab_ci_i_jenkins). Первые три модуля доступны бесплатно.
