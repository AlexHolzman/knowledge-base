---  
metaTitle: Логирование с помощью slog в Golang  
metaDescription: В этой статье мы рассмотрим, как использовать библиотеку slog для логирования в Go, изучим основные функции и возможности с примерами кода  
author: Олег Марков  
title: Логирование с помощью slog в Golang  
preview: Изучите, как эффективно использовать slog для логирования в Go-программах. Мы подробно рассмотрим функции и предложим практические примеры использования  
---  

## Введение

Логирование — это одна из основных задач в разработке программного обеспечения. Оно помогает отслеживать происходящее в вашей программе, что крайне полезно для отладки и мониторинга. В языке программирования Go существует множество библиотек для логирования, однако сегодня мы обсудим одну из них — slog. Это легковесная и простая в использовании библиотека, которая предлагает базовые возможности логирования. Давайте разберемся, как использовать slog в ваших Go-проектах.

В статье про логирование с помощью `slog` в Golang важно понимать, как правильно настроить логирование, какие уровни логирования существуют и как фильтровать сообщения. Для этого необходимо хорошее знание базовых структур, пакетов и интерфейсов Go. Если вы хотите углубить свои знания Go и уверенно работать с логированием и другими задачами, то вам будет полезен курс [Основы Golang](https://purpleschool.ru/course/go-basics?utm_source=knowledgebase&utm_medium=text&utm_campaign=logirovanie-s-pomoshchyu-slog-v-golang). На курсе 193 уроков и 16 упражнений, AI-тренажеры для безлимитной практики с кодом и задачами 24/7, решение задач с живым ревью наставника, еженедельные встречи с менторами.

## Установка и использование slog

Прежде чем мы перейдем к примерам и подробностям использования slog, давайте начнем с установки этой библиотеки и базовых шагов по ее настройке.

### Установка библиотеки slog

Чтобы начать использовать slog в вашем проекте, вам необходимо установить его. Вы можете сделать это с помощью команды `go get`. Выполните следующую команду в вашем терминале:

```shell
go get github.com/gookit/slog
```

Эта команда скачает slog и все необходимые для его работы зависимости. Теперь вы готовы начать логирование в вашем проекте.

### Настройка и простой пример

После установки библиотеки, давайте создадим простой пример, чтобы понять, как она работает. Во-первых, вам нужно импортировать slog в ваш код:

```go
package main

import (
	"github.com/gookit/slog"
	"os"
)

func main() {
	// Создаем новый логгер с уровнем INFO
	logger := slog.NewLogger(os.Stdout, slog.InfoLevel)

	// Записываем простой информационный лог
	logger.Info("Это информационное сообщение")

	// Записываем предупреждение
	logger.Warn("Это сообщение с предупреждением")

	// Записываем ошибку
	logger.Error("Произошла ошибка")
}
```

### Разбор примера

В этом примере мы используем основной пакет slog для создания нового логгера. Метод `slog.NewLogger` позволяет создать логгер, указав выходной поток (в данном случае `os.Stdout`) и уровень логирования. Доступные уровни зависят от конкретной реализации библиотеки, но основные из них: DEBUG, INFO, WARN, ERROR.

Вы заметили, как легко мы можем использовать различные уровни логирования для записи информации? Это помогает нам лучше организовать логи и отфильтровать записи по важности.

## Расширенные возможности slog

Хотя slog и прост в использовании, он также предоставляет ряд расширенных возможностей, которые могут быть полезны в сложных проектах.

### Форматирование логов

В slog вы можете определять формат вывода логов, чтобы они были более структурированы и читабельны. Давайте посмотрим, как это можно сделать:

```go
// Установка формата вывода
logger.SetFormatter(slog.NewTextFormatter(&slog.TextFormatterOptions{
    Tmpl: "{{time}} - {{level}} - {{message}}",
}))
```

#### Комментарий к коду

// Здесь мы определяем пользовательский формат вывода логов
// с помощью метода `SetFormatter` и шаблона `Tmpl`,
// который задает порядок и формат выводимых данных

Форматирование — это мощный инструмент, который позволяет адаптировать вывод логов под ваши нужды и делает их более читабельными.

### Фильтры и условия

Вы можете использовать фильтры для управления тем, какие сообщения будут записаны в лог, исходя из условий:

```go
logger.AddFilter(func(entry *slog.Entry) bool {
    return entry.Level >= slog.WarnLevel
})
```

#### Комментарий к коду

// Фильтр проверяет уровень сообщения, и только те
// которые выше или равны WarnLevel будут записаны в лог

Используя фильтры, вы можете управлять объемом логов, делая их более информативными и полезными.

### Логи в файл

Одним из важных аспектов логирования является возможность записи логов в файл. Давайте создадим пример, в котором логи записываются в файл:

```go
// Открываем файл для записи
file, err := os.OpenFile("app.log", os.O_CREATE|os.O_WRONLY|os.O_APPEND, 0666)
if err != nil {
	logger.Error("Не удалось открыть файл для логирования", err)
}
defer file.Close()

// Создаем логгер с выводом в файл
fileLogger := slog.NewLogger(file, slog.InfoLevel)
fileLogger.Info("Это сообщение записано в файл")
```

#### Комментарий к коду

// Здесь мы открываем (или создаем) файл "app.log" и
// устанавливаем его как выходной поток для логгера

Запись логов в файл полезна, когда нужно сохранить историю выполнения программы для дальнейшего анализа или аудита.

### Логирование ошибок

С помощью slog вы можете легко управлять логированием ошибок, добавляя их к записям логов. Давайте посмотрим на пример:

```go
func someFunction() error {
   return fmt.Errorf("произошла ошибка")
}

if err := someFunction(); err != nil {
    logger.Error("Ошибка в someFunction", slog.ErrField{Error: err})
}
```

#### Комментарий к коду

// Метод someFunction возвращает ошибку, и мы
// логируем эту ошибку вместе с сообщением

Логирование ошибок — важный аспект, который позволяет быстро идентифицировать и исправлять проблемы в коде.

Теперь, когда вы узнали, как работать с основными и расширенными возможностями slog, вы можете легко внедрять логирование в ваши Go-программы. Это не только улучшит ваш код, но и сделает его более поддерживаемым.

Чтобы подвести итоги, мы начали с базовой установки slog, рассмотрели простой пример использования, а затем углубились в дополнительные функции, такие как форматирование, использование фильтров, запись логов в файл и обработку ошибок. Вы вооружены всеми необходимыми инструментами для эффективного логирования в ваших Go-приложениях.

Используйте эти знания для улучшения читаемости вашего кода и упрощения процесса отладки. 

Итак, мы рассмотрели основные принципы логирования с помощью `slog` в Golang. Чтобы создавать надежные и масштабируемые приложения, важно не только знать инструменты логирования, но и понимать основы архитектуры и лучшие практики разработки. На нашем курсе [Основы Golang](https://purpleschool.ru/course/go-basics?utm_source=knowledgebase&utm_medium=text&utm_campaign=logirovanie-s-pomoshchyu-slog-v-golang) вы найдете необходимую базу знаний. В первых 3 модулях уже доступно бесплатное содержание — начните погружаться в Go прямо сегодня и станьте экспертом.
