---
metaTitle: Конвертация строк в числа в Golang
metaDescription: В этой статье мы рассмотрим, как конвертировать строки в числа в языке Go - включая парсинг целых и дробных чисел с помощью стандартных библиотек и полезные практические примеры
author: Олег Марков
title: Конвертация строк в числа в Golang
preview: Узнайте, как конвертировать строки в числа в Go - простые и полезные примеры с подробным объяснением каждой функции библиотеки strconv

---

## Введение

Программирование — это сфера, где мы часто сталкиваемся с задачей конвертации данных из одного формата в другой, и язык Go (или Golang) не является исключением. Сегодня мы сосредоточимся на том, как можно преобразовывать строки в числа в Go. Это важная часть работы с данными, и знание этих техник пригодится, когда вам нужно будет, например, анализировать данные из файлов, интерфейсов или веб-сервисов, которые возвращают числовые значения в текстовом формате.

## strconv: ваш главный помощник

Когда речь заходит о конвертации строк в числа в Go, на помощь приходит пакет `strconv`. Это стандартная библиотека, которая предоставляет различные функции для этого процесса. Давайте рассмотрим несколько ключевых аспектов.

### Конвертирование строки в целое число

Первая функция, которую мы рассмотрим — `strconv.Atoi`. Она используется для преобразования строки в целое число (тип int). Вот как она работает:

```go
package main

import (
    "fmt"
    "strconv"
)

func main() {
    str := "123"
    number, err := strconv.Atoi(str) // Atoi преобразует строку в int
    if err != nil {
        fmt.Println(err)
    } else {
        fmt.Println(number) // Вывод будет: 123
    }
}
```

Как видите, `strconv.Atoi` принимает строку `str` и пытается вернуть эквивалентное целое число. Если входные данные не могут быть корректно преобразованы, функция возвращает ошибку `err`. Это стандартная практика в Go — всегда проверять ошибку после вызова функций, которые могут её вернуть.

### Конвертирование строки в целое число произвольной базы

Если вы работаете с другой системой счисления, например, двоичной или шестнадцатеричной, вам пригодится функция `strconv.ParseInt`. Она позволяет явно указывать базу, которая используется в строке. Давайте посмотрим на пример:

```go
package main

import (
    "fmt"
    "strconv"
)

func main() {
    str := "7B" // шестнадцатеричная строка
    number, err := strconv.ParseInt(str, 16, 64) // 16 - основание; 64 - размер int
    if err != nil {
        fmt.Println(err)
    } else {
        fmt.Println(number) // Вывод будет: 123
    }
}
```

Здесь `strconv.ParseInt` позволяет указать, что строчка `str` содержит число в шестнадцатеричной системе (база 16), которое мы хотим преобразовать в десятичное число.

### Конвертирование строки в число с плавающей запятой

Преобразование строки в число с плавающей запятой выполняется функцией `strconv.ParseFloat`. Давайте разберём это на примере:

```go
package main

import (
    "fmt"
    "strconv"
)

func main() {
    str := "123.45"
    number, err := strconv.ParseFloat(str, 64) // 64 - требуемая точность
    if err != nil {
        fmt.Println(err)
    } else {
        fmt.Println(number) // Вывод будет: 123.45
    }
}
```

Функция `strconv.ParseFloat` превращает строку в число с плавающей запятой. Второй аргумент функции указывает на точность (битов), с которой мы хотим работать. Это может быть 32 или 64 и указывает на `float32` или `float64` соответственно.

### Хитрости и рекомендации

При работе с конвертацией строк в числа важно помнить о нескольких вещах:

1. **Проверка ошибок**: всегда проверяйте ошибку, возвращаемую конвертирующей функцией. Это поможет вам избежать неожиданных ситуаций в ваших программах.
   
2. **Обработка пустых строк**: внимательно работайте с пустыми строками. В Go вызов конвертирующей функции на пустой строке вернет ошибку, которую нужно корректно обработать.

3. **Точность**: когда вы работаете с числами с плавающей запятой, будьте внимательны к точности и выберите нужный для вас уровень (32 или 64 бита).

4. **Тестирование крайних случаев**: всегда тестируйте вашу программу на крайние случаи ввода, такие как очень большие или отрицательные числа.

Заключение

Мы рассмотрели основные методы и функции превращения строк в числа в Go, используя стандартную библиотеку `strconv`. Это, безусловно, мощный инструмент, который сильно упростит вашу работу с текстовыми и числовыми данными. Понимание и умение правильно использовать эти функции укрепит ваш код и сделает его более надежным и устойчивым к ошибкам. Не забудьте регулярно практиковаться и применять эти знания на практике, чтобы они стали вашей второй натурой. Надеюсь, эта статья была полезной и помогла вам немного глубже погрузиться в мир Go!